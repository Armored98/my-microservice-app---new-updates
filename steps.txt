gcloud services enable container.googleapis.com
gcloud services enable artifactregistry.googleapis.com
gcloud services enable cloudbuild.googleapis.com

gcloud auth configure-docker

cd frontend
docker build -t gcr.io/kubernetesproject-470408/frontend:latest ./frontend
docker push gcr.io/kubernetesproject-470408/frontend:latest

cd ../backend
docker build -t gcr.io/kubernetesproject-470408/backend:latest ./backend
docker push gcr.io/kubernetesproject-470408/backend:latest

gcloud container clusters create microservice-cluster --num-nodes=3 --zone=us-central1-a
gcloud container clusters get-credentials microservice-cluster --zone=us-central1-a

kubectl apply -f k8s/

kubectl get service frontend-service


kubectl set image deploy/backend backend=gcr.io/kubernetesproject-470408/backend:latest

kubectl rollout restart deployment frontend